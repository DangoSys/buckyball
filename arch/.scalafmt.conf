version = 2.6.4

# Only format src/main/scala directory
project.includeFilters = [
  "src/main/scala/.*\\.scala$"
]

# Basic formatting
maxColumn = 120
continuationIndent.defnSite = 2
continuationIndent.callSite = 2
continuationIndent.extendSite = 4

# Alignment
align.preset = most
align.openParenCallSite = false
align.openParenDefnSite = false
align.tokens.add = [
  {code = ":", owner = ".*"},
  {code = ":=", owner = ".*"},
  {code = "=", owner = "(Enumerator.Val|Defn.(Va(l|r)|Def|Type))"},
  {code = "=>", owner = "Case"},
  {code = "<-", owner = "Enumerator.Generator"},
  {code = "//", owner = ".*"}
]
align.arrowEnumeratorGenerator = true
align.multiline = true

# Newlines
newlines.source = keep
newlines.topLevelStatements = [before, after]
newlines.topLevelStatementsMinBreaks = 2
newlines.afterCurlyLambda = never
newlines.alwaysBeforeCurlyBraceLambdaParams = false
newlines.alwaysBeforeMultilineDef = false
newlines.implicitParamListModifierForce = [before]
newlines.avoidForSimpleOverflow = [punct]

# Vertical multiline
verticalMultiline.atDefnSite = true
verticalMultiline.arityThreshold = 4
verticalMultiline.newlineAfterOpenParen = true

# Docstrings
docstrings.style = asterisk
docstrings.wrap = no
docstrings.oneline = keep

# Spaces
spaces.inImportCurlyBraces = false
spaces.beforeContextBoundColon = Never
spaces.afterTripleEquals = false
spaces.inByNameTypes = true

# Line endings and misc
lineEndings = preserve
assumeStandardLibraryStripMargin = true
includeCurlyBraceInSelectChains = true
danglingParentheses.preset = true
danglingParentheses.defnSite = true
danglingParentheses.callSite = true
danglingParentheses.exclude = []

# Optional features
optIn.annotationNewlines = true
optIn.breakChainOnFirstMethodDot = true
optIn.configStyleArguments = true

# Rewrite rules
rewrite.rules = [
  SortImports,
  SortModifiers,
  PreferCurlyFors,
  RedundantBraces,
  RedundantParens
]
rewrite.sortModifiers.order = [
  "override", "private", "protected", "implicit", "final", "sealed", "abstract", "lazy"
]
rewrite.redundantBraces.stringInterpolation = true
rewrite.redundantBraces.generalExpressions = false
rewrite.redundantBraces.methodBodies = true
rewrite.redundantBraces.includeUnitMethods = true
rewrite.redundantBraces.maxLines = 1

# Comments
comments.wrap = standalone
comments.wrapStandaloneSlcAsSlc = true
